<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>学习互助</title>
    <!-- Fonts-->
    <link rel="stylesheet" th:href="@{/css/fontsgoogleapis.css}">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}"/>
    <!-- CSS Library-->
    <link th:href="@{/css/bootstrap.min14ed.css?v=3.3.6}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min93e3.css?v=4.4.0}" rel="stylesheet">
    <link th:href="@{/css/animate.css}" rel="stylesheet">
    <link th:href="@{/css/style.min.css?v=4.1.0}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/revolution/layers.css}">
    <link rel="stylesheet" th:href="@{/css/revolution/navigation.css}">
    <script type="text/javascript" th:src="@{/layui/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/vue.js}"></script>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/style.min862f.css?v=4.1.0}">
</head>
    <!--参考 layui 后台布局-->
    <body class="layui-layout-body">
    <!--[if IE 7]>
    <body class="ie7 lt-ie8 lt-ie9 lt-ie10"><![endif]-->
    <!--[if IE 8]>
    <body class="ie8 lt-ie9 lt-ie10"><![endif]-->
    <!--[if IE 9]>
    <body class="ie9 lt-ie10"><![endif]-->
    <body class="ps-loading">
        <header class="header" th:fragment="myheader">
            <div class="header__top">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-6 col-md-8 col-sm-6 col-xs-12">
                            <p>学习不仅是获取知识，也是发现知识的过程。</p>
                        </div>
                        <div class="col-lg-6 col-md-4 col-sm-6 col-xs-12">
                            <div class="header__actions">
                                <div id="avatarsDiv" style="line-height:40px">
                                    <img src="" style="width:30px;display: none" id="avatars" class="layui-circle">
                                    <a th:href="@{/user/center}" target="_blank"><i class="fa fa-user" aria-hidden="true"></i>&nbsp;个人中心&nbsp;&nbsp;</a>
                                    <a th:href="@{/user/logout}"><i class="fa fa-sign-out" aria-hidden="true"></i>&nbsp;退出登录</a>
                                </div>
                                <a id="login" th:href="@{/login}">登录 & 注册</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="navigation" th:fragment="navigate">
                <div class="container-fluid">
                    <div class="navigation__column left">
                        <div class="header__logo"><a class="ps-logo" th:href="@{/}">
                            <img th:src="@{/images/logo.png}" alt=""></a></div>
                    </div>
                    <div class="navigation__column center">
                        <div th:include="~{home :: homeNavigate}"></div>
                    </div>
                    <div class="navigation__column right">
                        <form class="ps-search--header layui-form" th:action="@{/product-search}" method="get">
                            <input class="form-control" type="text" name="keys"
                                   lay-verify="required" lay-reqtext="商品关键字，岂能为空？" placeholder="请输入关键字">
                            <button type="submit" class="layui-btn" lay-submit="" lay-filter="tosearch"><i class="ps-icon-search"></i></button>
                        </form>
                    </div>
                </div>
            </nav>
        </header>
        <main class="gray-bg">
            <div class="wrapper wrapper-content  animated fadeInRight blog">
                <div class="row">
                    <div class="col-sm-6" id="div1"></div>
                    <div class="col-sm-6" id="div2"></div>
                </div>
            <script th:src="@{/layui/jquery.min.js?v=2.1.4}"></script>
            <script th:src="@{/js/bootstrap.min.js?v=3.3.6}"></script>
            <script th:src="@{/js/content.min.js?v=1.0.0}"></script>
            <script th:src="@{/layui/layui.all.js}"></script>
            <script th:src="@{/js/core.util.js}"></script>
            <script th:inline="javascript" type="text/javascript">
                var ctx = '[[@{/}]]'.replaceAll("\"", "").replace('//', '/');
            </script>
            <script type="text/javascript" th:src="@{/js/navigate.js}"></script>
        </main>
        <!-- 定义 LayUI 模板 -->
        <script type="text/html" id="articleTpl">
            {{# layui.each(d.articlePostVOList, function(index, item){ }}
            <div class="social-feed-box">
                <div class="social-avatar">
                    <a href="#" class="pull-left">
                        <img alt="image" src="{{item.userImage}}">
                    </a>
                    <div class="media-body">
                        <a href="#">
                            {{item.userName}}
                        </a>
                        <small class="text-muted">{{item.articleTimeDesc}}</small>
                    </div>
                </div>
                <div class="social-body">
                    <div class="media-body">
                        <p>
                            {{item.topic}}
                        </p>
                        {{item.articleContent}}
                        <div class="photos">
                            {{# layui.each(item.imgSrcs, function(index, image){ }}
                            <a target="_blank" href="javascript:void(0)">
                                <img src="{{image}}" class="img-responsive"/>
                            </a>
                            {{# }); }}
                        </div>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-white btn-xs"><i class="fa fa-thumbs-up"></i> 赞</button>
                        <button class="btn btn-white btn-xs btn-comments" data-toggle="collapse" data-target="#comment-box-{{index}}"><i class="fa fa-comments"></i> 评论</button>
                    </div>
                </div>
                <div class="social-footer">
                    {{# layui.each(item.comments, function(index, comment){ }}
                    <div class="social-comment">
                        <a href="#" class="pull-left">
                            <img alt="image" src="{{comment.userImage}}">
                        </a>
                        <div class="media-body">
                            <a href="#">
                                {{comment.userName}}
                            </a> {{comment.content}}
                            <br/>
                            <a href="#" class="small"><i class="fa fa-thumbs-up"></i> {{comment.likes}}</a> -
                            <small class="text-muted">{{comment.articleTimeDesc}}</small>
                        </div>
                    </div>
                    {{# }); }}
                    <div class="social-comment collapse" id="comment-box-{{index}}">
                        <a href="#" class="pull-left">
                            <img alt="image" src="{{d.userInfo.uimage}}">
                        </a>
                        <div class="media-body">
                            <textarea class="form-control" placeholder="填写评论..."></textarea>
                        </div>
                        </br>
                        <button id="save" class="btn btn-primary  btn-xs" onclick="save()" type="button" style="float: right;">保存</button>
                    </div>
                </div>
            </div>
            {{# }); }}
        </script>
        <script>
            layui.use(['form', 'layer','carousel'], function () {
                var form = layui.form;
                var $ = layui.jquery,
                    layer = layui.layer;
                var carousel = layui.carousel;
                carousel.render({
                    elem: '#test10'
                    , width: '100%'
                    , height: '300px'
                    ,interval: 5000,
                    headers: {'access_token': CoreUtil.getData("access_token")}
                });
            });

            var layer = layui.layer;
            var $ = jQuery = layui.jquery;
            var form = layui.form;
            var element = layui.element;
            $(function () {
                CoreUtil.sendGet(ctx + "sys/assistance/", null, function (res) {
                    renderTemplate(res);
                });

                function renderTemplate(res) {
                    var html = '';
                    var articleRespVO = res.data;
                    var articleHtml = $('#articleTpl').html();
                    layui.laytpl(articleHtml).render(articleRespVO, function(result){
                        html = result;
                    });

                    // 定义两个 div 元素
                    var div1 = $('#div1');
                    var div2 = $('#div2');

                    // 过滤掉文本节点
                    var elements = $(html).filter(function() {
                        return this.nodeType === Node.ELEMENT_NODE;
                    });

                    // 遍历模板中的每个元素
                    $(elements).each(function(index, element) {
                        // 将元素插入到不同的 div 中
                        if (index % 2 == 0) {
                            div1.append(element);
                        } else {
                            div2.append(element);
                        }
                    });
                }
            });

            $(document).ready(function() {
                // 监听评论按钮的点击事件
                $('.btn-comments').click(function() {
                    // 切换评论框的显示状态
                    $('#comment-box').toggle('fast');
                });
            });

            function save(){

            }

            $(document).ready(function() {
                // 监听评论按钮的点击事件
                $('.btn-comments').click(function() {
                    // 获取评论框的索引
                    var index = $(this).closest('.social-feed-box').index();

                    // 切换评论框的显示状态
                    $('#comment-box-' + index).toggle('fast');
                });

                // 监听保存按钮的点击事件
                $('.btn-save').click(function() {
                    // 获取评论框的索引
                    var index = $(this).closest('.social-feed-box').index();

                    // 隐藏评论框
                    $('#comment-box-' + index).hide('fast');
                });
            });
        </script>
    </body>
</html>